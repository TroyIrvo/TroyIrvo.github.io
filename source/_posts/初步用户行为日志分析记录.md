---
title: 初步用户行为日志分析记录
date: 2019-06-28 11:47:00
author: TroyIrvo
categories: javascript
tags:
  - 埋点统计
  - vue
---

## 用户行为日志采集方案 ##
关于用户行为日志分析，这几天查阅了相关资料网上大概有四种方案
主要分为以下三类：

- 代码埋点：在需要埋点的节点调用接口，携带数据上传。如百度统计等；
- 可视化埋点：使用可视化工具进行配置化的埋点，即所谓的「无痕埋点」，前端在页面加载时，可以读取配置数据，自动调用接口进行埋点。如开源的Mixpanel;
- 无埋点：前端自动采集全部事件并上报埋点数据。如国内的神策数据，目前比较流行的例如GrowingIO等；

结合目前我们现有的情况，决定使用代码埋点的方式来初步实现公司的用户行为日志采集。

### 代码埋点 ###

代码埋点的方式有：声明式埋点，命令式埋点，注解式埋点。
结合现有的技术，打算采用注解式埋点作为基础，逐步扩展，目前参考了一些开源项目，已有大概思路。

### 埋点行为 ###
大概参考了一下网上例子，基本把采集日志的时机场景化了。主要有如下场景行为：
#### 页面展现埋点 ####
这种很好理解，一打开即触发埋点行为。一关闭即可触发埋点行为。

#### 点击统计埋点 ####

这种类似于点击事件。页面上的按钮，图标等，触发埋点行为。

#### 区域展现埋点 ####
这种是有多个切换页面的时候，就有区域的概念，显示隐藏某一块内容的时候触发埋点行为。
#### 可视范围埋点 ####
这种就类似所见即所得，当用户屏幕滚动到一定的范围，就开始触发埋点行为。


### 采集信息 ###

目前这块内容还没有完全确定，只有个大概的思路。需要具体采集什么字段，结合我们自身的业务考虑。
有一些通用字段可以确定。如

内容 | 说明
---|---
id | 上报信息id
reportTime | 上报信息时间
reportContent | 上报内容
reportType |  上报类型（点击，页面，区域，可视）
reportDevice | 上报设备型号
reprotName | 上报人姓名
reprotOrg | 上报人组织

以上只是想当然的大概字段，具体如何定，各位可以商量一下。

相关参考资源链接如下：

[前端监控系统](https://www.webfunny.cn/?source=1)

[v-track开源](https://lhammer.cn/v-track/#/)

[无痕埋点辅助工具库](https://github.com/Qquanwei/trackpoint-tools)






